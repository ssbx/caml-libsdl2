(include_subdirs unqualified)

(rule
 (targets c_flags.sexp)
  (action
 (with-stdout-to c_flags.sexp
    (system "echo -n '('; pkg-config --cflags sdl2; echo -n ')'"))))

(rule
 (targets c_library.sexp)
  (action
 (with-stdout-to c_library.sexp
    (system "echo -n '('; pkg-config --libs sdl2; echo -n ')'"))))

(library
 (public_name osdl2)
 (name osdl2)
 (modes native)
 (install_c_headers
   audio_stub
   blendMode_stub
   keymod_stub
   pixelFormat_stub
   pixel_stub
   point_stub
   rect_stub
   renderer_stub
   rwops_stub
   surface_stub
   texture_stub
   window_stub)
 (foreign_stubs
  (language c)
  (names
    video_stub
    rect_stub
    pixelFormat_stub
    pixel_stub
    keymod_stub
    error_stub
    blendMode_stub
    surface_stub
    surface_ba_stub
    window_stub
    init_stub
    quit_stub
    timer_stub
    event_stub
    version_stub
    texture_stub
    renderer_stub
    rwops_stub
    power_stub
    mouse_stub
    keyboard_stub
    audio_stub
    clipboard_stub
    cpuinfo_stub
    filesystem_stub
    joystick_stub
    gl_stub
    platform_stub
    )
  (flags :standard (:include c_flags.sexp)))
 (c_library_flags (:include c_library.sexp)))
