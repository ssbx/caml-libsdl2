(include_subdirs unqualified)

(rule
 (targets c_flags_sdl2.sexp)
  (action
 (with-stdout-to c_flags_sdl2.sexp
    (system "echo -n '('; pkg-config --cflags sdl2; echo -n ')'"))))

(rule
 (targets c_library_sdl2.sexp)
  (action
 (with-stdout-to c_library_sdl2.sexp
    (system "echo -n '('; pkg-config --libs sdl2; echo -n ')'"))))

;(rule
 ;(targets c_flags_caml.sexp)
  ;(action
 ;(with-stdout-to c_flags_caml.sexp
   ;(system "echo -n '( -I'; ocamlc -where; echo -n ')'"))))

(library
 (public_name osdl)
 (name osdl)
 (modes native)
 (install_c_headers
   stubs/sdlaudio
   stubs/sdlblendMode
   stubs/sdlkeymod
   stubs/sdlpixelFormat
   stubs/sdlpixel
   stubs/sdlpoint
   stubs/sdlrect
   stubs/sdlrenderer
   stubs/sdlrwops
   stubs/sdlsurface
   stubs/sdltexture
   stubs/sdlwindow)
 (foreign_stubs
  (language c)
  ; cstubs/ directory, works because (include_subdirs unqualified)
  (names
    sdlvideo
    sdlrect
    sdlpixelFormat
    sdlpixel
    sdlkeymod
    sdlerror
    sdlblendMode
    sdlsurface
    sdlsurface_ba
    sdlwindow
    sdlinit
    sdlquit
    sdltimer
    sdlevent
    sdlversion
    sdltexture
    sdlrenderer
    sdlrwops
    sdlpower
    sdlmouse
    sdlkeyboard
    sdlaudio
    sdlclipboard
    sdlcpuinfo
    sdlfilesystem
    sdljoystick
    sdlgl
    sdlplatform
    )
  (flags :standard (:include c_flags_sdl2.sexp)))
 (c_library_flags (:include c_library_sdl2.sexp)))
